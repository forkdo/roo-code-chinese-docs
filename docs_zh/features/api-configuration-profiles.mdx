---
description: 了解如何创建和管理 API 配置方案，以便在 Roo Code 中轻松切换不同的 AI 提供商和模型。
keywords:
  - API configuration
  - profiles
  - AI providers
  - model switching
  - API management
---

# API 配置方案

API 配置方案允许您创建和切换不同的 AI 设置集。每个方案都可以为每种模式设置不同的配置，让您根据当前任务优化使用体验。

:::info
拥有多个配置方案可以让您在想要更改设置时，无需每次都重新配置所有内容，即可快速切换不同的 AI 提供商、模型和设置。
:::

<div style={{ position: 'relative', paddingBottom: '56.25%', height: 0, overflow: 'hidden' }}>
  <iframe
    src="https://www.youtube.com/embed/eEJErgZBqLE?rel=0&modestbranding=1"
    style={{
      position: 'absolute',
      top: 0,
      left: 0,
      width: '100%',
      height: '100%',
    }}
    frameBorder="0"
    allow="autoplay; encrypted-media"
    allowFullScreen
  ></iframe>
</div>
<br />

---

## 工作原理

配置方案可以拥有自己的：
- API 提供商（OpenAI、Anthropic、OpenRouter、Glama 等）
- API 密钥和身份验证详细信息
- 模型选择（o3-mini-high、Claude 3.7 Sonnet、DeepSeek R1 等）
- 用于控制响应随机性的[温度设置](/features/model-temperature)
- 思考预算
- 提供商特定设置
- 差异编辑配置（参见 [`apply_diff`](/advanced-usage/available-tools/apply-diff)）
- 速率限制设置

请注意，可用的设置因提供商和模型而异。每个提供商提供不同的配置选项，即使是同一提供商，不同的模型也可能支持不同的参数范围或功能。

---

## 创建和管理方案

### 创建方案

1. 点击齿轮图标 <Codicon name="gear" /> → 提供商，打开设置
2. 点击方案选择器旁边的"+"按钮

   <img src="/img/api-configuration-profiles/api-configuration-profiles-1.png" alt="带有加号按钮的方案选择器" width="550" />
3. 为您的新方案输入名称
   
   <img src="/img/api-configuration-profiles/api-configuration-profiles.png" alt="创建新方案对话框" width="550" />
4. 配置方案设置：
   - 选择您的 API 提供商
      
      <img src="/img/api-configuration-profiles/api-configuration-profiles-2.png" alt="提供商选择下拉菜单" width="550" />
   - 输入 API 密钥
   
      <img src="/img/api-configuration-profiles/api-configuration-profiles-3.png" alt="API 密钥输入字段" width="550" />
   - 选择模型
   
      <img src="/img/api-configuration-profiles/api-configuration-profiles-8.png" alt="模型选择界面" width="550" />
   - 配置此方案的**速率限制**：
     - **默认为 0（禁用），适合大多数用户。**如有需要，您可以设置 API 请求之间的最短时间（以秒为单位）*针对此方案*，以帮助管理成本或避免提供商速率限制。
     - 值为 0 表示禁用速率限制（默认）。
     - 使用其他方案的请求遵循各自的速率限制。

         <img src="/img/api-configuration-profiles/api-configuration-profiles-12.png" alt="API 方案设置中的速率限制滑块控件" width="550" />
   - 调整模型参数（如[温度](/features/model-temperature)）
   
### 切换方案

通过两种方式切换方案：
1. 从设置面板：从下拉菜单中选择不同的方案

   <img src="/img/api-configuration-profiles/api-configuration-profiles-7.png" alt="设置中的方案选择下拉菜单" width="550" />
2. 在聊天过程中：访问聊天界面中的 API 配置下拉菜单

   <img src="/img/api-configuration-profiles/api-configuration-profiles-6.png" alt="聊天界面中的 API 配置下拉菜单" width="550" />
### 固定和排序方案

API 配置下拉菜单现在支持固定您喜欢的方案，以便更快访问：

1. 将鼠标悬停在下拉菜单中的任何方案上，以显示固定图标
2. 点击固定图标，将方案添加到您的固定列表
3. 固定的方案按字母顺序显示在下拉菜单的顶部
4. 未固定的方案显示在分隔符下方，也按字母顺序排序
5. 您可以通过再次点击相同的图标来取消固定方案

<img src="/img/api-configuration-profiles/api-configuration-profiles-4.png" alt="固定 API 配置方案" width="550" />

此功能使您在常用方案之间导航更加容易，尤其是在您拥有许多配置时。


### 编辑和删除方案

<img src="/img/api-configuration-profiles/api-configuration-profiles-10.png" alt="方案编辑界面" width="550" />
- 在设置中选择方案以修改任何设置
- 点击铅笔图标重命名方案
- 点击垃圾桶图标删除方案（您无法删除仅剩的方案）

---

## 将方案链接到模式
在 <Codicon name="notebook" /> 提示选项卡中，您可以明确地将特定的配置方案与每种模式关联。系统还会自动记住您上次与每种模式一起使用的方案，从而使您的工作流程更加高效。
<img src="/img/api-configuration-profiles/api-configuration-profiles-11.png" alt="提示选项卡中的方案-模式关联界面" width="550" />

---

## 每任务方案持久性

每个任务都会记住它开始时使用的方案。这种"粘性"行为意味着：

- **从历史记录重新打开**：当您从历史记录恢复任务时，它会使用它原来拥有的相同方案——即使您之后更改了全局选择。
- **多工作区一致性**：如果您在另一个工作区窗口中切换方案，第一个窗口中的现有任务会保留其原始方案。
- **协调器子任务**：由协调器创建的子任务继承父任务的方案，并在其整个生命周期内保留它。

这可以防止任务中途出现意外的模型切换，并使您的对话上下文与生成它的模型保持一致。

---

## 安全说明

API 密钥安全地存储在 VSCode 的秘密存储中，永远不会以明文形式暴露。

---

## 相关功能

- 与您创建的[自定义模式](/features/custom-modes)配合使用
- 与[本地模型](/advanced-usage/local-models)集成，用于离线工作
- 支持每种模式的[温度设置](/features/model-temperature)
- 支持每方案速率限制（在此配置）和一般[使用跟踪/成本信息](/advanced-usage/rate-limits-costs)
- 支持基于差异的编辑（参见 [`apply_diff`](/advanced-usage/available-tools/apply-diff)）。