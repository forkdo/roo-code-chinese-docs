---
description: 使用 Roo Code 的“增强提示”功能提升您的 AI 交互体验。只需点击一下，即可自动优化提示，使其更清晰、更具上下文，并获得更好的结果。
keywords:
  - enhance prompt
  - prompt optimization
  - AI prompts
  - prompt engineering
  - chat enhancement
  - prompt refinement
  - wand icon
---

# 增强提示

Roo Code 的“增强提示”功能可帮助您在将提示发送给 AI 模型之前提升其质量和有效性。通过点击聊天输入框中的魔棒图标，您可以自动优化初始请求，使其更清晰、更具体，并更有可能产生期望的结果。

---

## 为何使用“增强提示”？

*   **提升清晰度：** Roo Code 可以重新表述您的提示，使其对 AI 模型更易于理解。
*   **添加上下文：** 增强过程可以为您的提示添加相关上下文，例如当前文件路径或选定的代码。
*   **更好的指令：** Roo Code 可以添加指令，以引导 AI 提供更有效的响应（例如，要求特定的格式或特定级别的详细信息）。
*   **减少歧义：** “增强提示”有助于消除歧义，确保 Roo Code 理解您的意图。
*   **一致性：** Roo 将以相同的方式一致地格式化发送给 AI 的提示。
*   **上下文感知建议：** 启用后，将使用您最近的对话历史记录生成更相关、更准确的增强建议。

---

## 如何使用“增强提示”

1.  **输入您的初始提示：** 像平常一样在 Roo Code 聊天输入框中输入您的请求。这可以是一个简单的问题、一个复杂的任务描述，或介于两者之间的任何内容。
2.  **点击魔棒图标：** 不要按回车键，而是点击位于聊天输入框右上角的魔棒图标。当 Roo 处理您的增强请求时，魔棒图标将旋转以指示其正在工作。
3.  **查看增强后的提示：** Roo Code 将用增强版本替换您的原始提示。查看增强后的提示，确保其准确反映了您的意图。您可以在发送之前进一步优化增强后的提示。改变主意了？您可以使用 Ctrl+Z（Mac 上为 Cmd+Z）撤销增强以恢复原始提示。
4.  **发送增强后的提示：** 按回车键或点击发送图标 (<Codicon name="send" />) 将增强后的提示发送给 Roo Code。

---

## 特殊行为

### 空提示增强

如果您在提示为空的情况下点击增强按钮，Roo 将向您显示一条有用的消息，解释该功能的工作原理。如果您是新手，这是了解增强功能的好方法。

### 消息排队支持

即使消息发送被禁用，增强按钮仍保持启用状态。这允许您增强将排队等待稍后发送的提示。

---

## 自定义增强过程

“增强提示”功能使用可自定义的提示模板。您可以修改此模板，以根据您的特定需求定制增强过程。

### 访问提示设置

1.  **打开设置：** 点击 Roo Code 面板中的齿轮图标 (<Codicon name="gear" />) 或使用设置命令。
2.  **导航到提示：** 转到设置中的“提示”选项卡。
3.  **选择“ENHANCE”：** 从下拉菜单中选择“ENHANCE”以查看和编辑增强提示。

### 编辑增强提示

默认的增强提示模板为：

```
Generate an enhanced version of this prompt (reply with only the enhanced prompt - no conversation, explanations, lead-in, bullet points, placeholders, or surrounding quotes):

${userInput}
```

`${userInput}` 占位符将被您的原始提示替换。您可以修改此模板以适应您的需求和模型的提示格式。

### 测试您的自定义提示

提示设置包含一个测试区域，您可以在其中预览自定义增强提示的工作方式：

1. 编辑增强提示后，查找“测试增强”部分
2. 输入一个示例提示进行测试
3. 点击“测试”以查看您的自定义提示将如何增强它
4. 根据结果调整您的增强提示

---

## API 配置

默认情况下，用于“增强提示”的 API 配置与为 Roo Code 任务选择的配置相同，但可以进行更改：

1.  **打开设置：** 导航到 Roo Code 设置
2.  **转到提示选项卡：** 选择“提示”选项卡
3.  **选择“ENHANCE”：** 从下拉列表中选择“ENHANCE”
4.  **配置 API：** 您将看到一个“API 配置”下拉列表，可以在其中选择现有配置。未来的“增强提示”请求将发送到该配置的提供程序/模型。

---

## 上下文感知增强

“增强提示”功能现在可以使用您的对话历史记录生成更相关的建议。这有助于减少幻觉，并根据您一直在处理的内容提供更准确的增强。

### 工作原理

启用后，增强过程会将当前对话的最后 10 条消息作为上下文包含在内。这使得 AI 能够：
- 了解您一直在处理的内容
- 与之前的讨论保持一致
- 避免建议不相关或不正确的增强
- 提供更针对性和更有用的提示改进

### 启用任务历史上下文

要启用或禁用提示增强中的对话历史记录使用：

1. **打开设置：** 导航到 Roo Code 设置
2. **转到提示选项卡：** 选择“提示”选项卡
3. **选择“ENHANCE”：** 从下拉列表中选择“ENHANCE”
4. **切换历史记录选项：** 勾选或取消勾选“在增强中包含任务历史记录”以获得更好的上下文

禁用后，增强将仅考虑您当前的提示，而不会包含任何对话上下文。

---

## 视觉反馈和 UI 元素

### 按钮外观
- 魔棒图标默认为半透明（60% 不透明度）
- 当您将鼠标悬停在其上时，变为完全不透明（100%）
- 位于聊天输入框的右上角
- 具有用于键盘可访问性的焦点环

### 加载状态
- 处理您的增强请求时，魔棒图标会旋转
- 这提供了清晰的视觉反馈，表明 Roo 正在处理您的提示

### 工具提示
- 悬停在按钮上会显示：“使用其他上下文增强提示”
- 帮助新用户了解按钮的用途

---

## 限制和最佳实践

*   **实验性功能：** 提示增强是一项实验性功能。增强提示的质量可能因您的请求复杂性和底层模型的功能而异。
*   **仔细查看：** 在发送增强提示之前，请务必仔细查看。Roo Code 可能会进行不符合您意图的更改。
*   **迭代过程：** 您可以多次使用“增强提示”功能来迭代优化您的提示。
*   **不能替代清晰的指令：** 虽然“增强提示”可以提供帮助，但首先编写清晰和具体的提示仍然很重要。

通过使用“增强提示”功能，您可以提高与 Roo Code 交互的质量，并获得更准确和更有帮助的响应。