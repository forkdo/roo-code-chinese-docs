---
description: Roo Code 3.14 带来了 Gemini 缓存、Boomerang Orchestrator 模式、改进的文件编辑工具以及全新的极简主义 UI 设计。
keywords:
  - roo code
  - v3.14
  - release notes
  - Boomerang Orchestrator
  - Gemini caching
  - file editing
  - apply_diff
  - minimalist UI
---

# Roo Code 3.14 综合更新

---

## Gemini 2.5 缓存现已上线！

*   **Gemini 模型的提示缓存：** 提示缓存现已适用于使用 [Requesty](/providers/requesty)、[Google Gemini](/providers/gemini) 或 [OpenRouter](/providers/openrouter) 提供商时的 `Gemini 1.5 Flash`、`Gemini 2.0 Flash` 和 `Gemini 2.5 Pro Preview` 模型（Vertex 提供商和 `Gemini 2.5 Flash Preview` 缓存即将推出！）
*   **手动缓存开关（仅限 Google Gemini 和 OpenRouter）：**
    *   具体来说，对于 **[Google Gemini](/providers/gemini)** 和 **[OpenRouter](/providers/openrouter)** 提供商，新增了一个复选框，允许您手动为支持的 Gemini 2.5 模型启用提示缓存。
        <img src="/img/v3.14.2/v3.14.2.png" alt="Provider Settings 中的 Prompt Caching Checkbox" width="600" />
    *   **为什么要有这个复选框？** 此设置是作为临时解决方案，用于解决通过这两个提供商访问 Google 缓存机制时有时可能出现的响应延迟问题。对于它们，缓存*默认不*启用。
    *   **Requesty：** 通过 Requesty，支持的模型缓存仍然是自动的。

---

## Boomerang Orchestrator 模式

*   新增 Boomerang Orchestrator 作为内置模式。
    <img src="/img/v3.14.3/v3.14.3-1.png" alt="Boomerang Orchestrator Mode" width="600" />

---

## 性感的新极简主义外观

*   改进了主屏幕用户界面，带来更好的初始体验。
    <img src="/img/v3.14.3/v3.14.3.png" alt="New Minimalist Home Screen" width="600" />

---

## Apply Diff 及其他主要文件编辑改进

*   改进 [`apply_diff`](/advanced-usage/available-tools/apply-diff) 以更好地与 **Google Gemini 2.5** 及其他模型配合使用
*   在更改被批准后，自动关闭由编辑工具（`apply_diff`、`insert_content`、`search_and_replace`、`write_to_file`）打开的文件。这可以防止 Roo 打开的文件使编辑器变得杂乱，并通过仅显示用户有意打开的文件来帮助明确上下文。
*   新增 `search_and_replace` 工具。此工具使用字面字符串或正则表达式在文件中查找并替换文本，可选择在特定行范围内进行（感谢 samhvw8！）。
*   新增 `insert_content` 工具（现已弃用）。此工具在文件的特定位置或末尾添加新行，而不会修改现有内容（感谢 samhvw8！）。
*   弃用 `append_to_file` 工具，推荐使用 `insert_content`（使用 `line: 0`）。
*   当 [`write_to_file`](/advanced-usage/available-tools/write-to-file) 因缺少行数而失败时，正确回滚更改并建议使用其他工具
*   为 [`apply_diff`](/advanced-usage/available-tools/apply-diff) 工具提供更好的进度指示器（感谢 qdaxb！）
*   确保即使在 API 错误期间，用户反馈也会被添加到对话历史记录中（感谢 System233！）。
*   防止在恢复任务时出现冗余的 'TASK RESUMPTION' 提示（感谢 System233！）。
*   修复在取消 API 请求后错误消息有时不显示的问题（感谢 System233！）。

---

## 终端修复

*   改进了对包含退格字符的终端输出的处理，以实现更清晰的显示（感谢 KJ7LNW！）。
*   修复终端回车处理，以正确显示进度条（感谢 Yikai-Liao！）

---

## 国际化：新增俄语支持

*   新增俄语支持（Спасибо asychin！）。

---

## 上下文提及

*   在提及中使用 Material 图标来表示文件和文件夹（感谢 elianiva！）
*   改进 Linux 上的图标渲染（感谢 elianiva！）
*   更好地处理上下文提及中的 `aftercursor` 内容（感谢 elianiva！）

<img src="/img/v3.14.0/v3.14.0.png" alt="Context Mentions with Material Icons" width="600" />
---

## Footgun Prompting

*   **上下文变量：** 新增在自定义系统提示覆盖文件中插值上下文变量（`{{workspace}}`、`{{mode}}`、`{{language}}`、`{{shell}}`、`{{operatingSystem}}`）的功能，从而实现更动态的提示（感谢 daniel-lxs！）。详情请参见 [Footgun Prompting 文档](/advanced-usage/footgun-prompting#using-context-variables)。
*   **覆盖警告：** 当当前模式的系统提示覆盖处于活动状态时，Roo Code 现在在聊天输入框中显示一个警告指示器。

    <img src="/img/footgun-prompting/footgun-prompting-1.png" alt="Warning indicator for active system prompt override" width="600" />


---

## MCP 调整

*   支持在 MCP 配置中注入环境变量（感谢 NamesMT！）
*   修复将扩展拖放到另一个侧边栏时的 MCP 中心错误
*   改进长 MCP 工具参数的显示

---

## 提供商更新

*   允许 Amazon Bedrock Marketplace ARN（感谢 mlopezr！）
*   改进 Requesty 模型列表获取（感谢 dtrugman！）
*   使 VS Code LM 提供商显示正确的模型信息（感谢 QuinsZouls！）
*   从 VS Code LM 提供商中移除不必要的计算（感谢 d-oit！）
*   将 Unbound 提供商的默认模型 ID 从 `claude-3.5-sonnet` 更新为 `claude-3.7-sonnet`（感谢 pugazhendhi-m！）。

---

## 错误修复和常规 QOL 改进及其他

*   使 [`list_files`](/advanced-usage/available-tools/list-files) 工具更高效、更智能地排除 `.git/` 等目录
*   任务大小计算的性能改进，包括更高效的令牌计数估算，以减少灰屏。
*   为聊天行提供更好的加载反馈（感谢 elianiva！）
*   使用更合理的任务导出图标
*   修复 Windows 上以及使用 SSH 隧道时的文件拖放问题（感谢 NyxJae！）
*   修复“添加到上下文”代码操作中的插值错误（感谢 elianiva！）
*   修复冗余的 'TASK RESUMPTION' 提示（感谢 System233！）
*   修复在编辑器没有工作区根目录时打开文件的错误
*   更改 API 提供商时不要立即显示模型 ID 错误
*   修复以使 `focusInput` 命令更可靠（感谢 hongzio！）
*   在评估中跟踪工具使用错误
*   在 Webview 源文件中使用路径别名
*   更好地处理 FakeAI “controller” 对象（感谢 wkordalski）
*   确保即使在 API 错误期间，用户反馈也会被添加到对话历史记录中（感谢 System233！）。
*   防止在恢复任务时出现冗余的 'TASK RESUMPTION' 提示（感谢 System233！）。
*   修复在取消 API 请求后错误消息有时不显示的问题（感谢 System233！）。
*   在差异比较期间保留编辑器状态并防止取消固定标签页（感谢 seedlord！）
*   清理内部设置数据模型以提高可维护性。
*   通过为不支持推理的模型省略推理参数来优化 API 调用。
*   修正 Roo 消息标题中的自动换行（感谢 zhangtony239！）。
*   改进了关于添加自定义设置的文档清晰度（感谢 shariqriazz！）。