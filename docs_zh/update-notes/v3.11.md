---
description: Roo Code 3.11 引入了基于差异的快速编辑、API 密钥余额检查、项目级 MCP 配置以及增强的 Gemini 支持。
keywords:
  - roo code
  - v3.11
  - release notes
  - fast edits
  - API balances
  - MCP config
  - Gemini support
  - import export settings
---

# Roo Code 3.11 版本说明 (2025-03-30)

本次更新专注于性能增强、改进的提供商集成以及基于社区反馈的可用性优化。

---

## 快速编辑

Roo Code 的默认编辑机制（通过 [`apply_diff`](/advanced-usage/available-tools/apply-diff) 工具使用差异）现在速度显著提升，尤其是在一次性应用多个更改时。这种方法仅修改必要的行，而不是重写整个文件，从而实现更快的编辑，并有助于防止大文件上的写入截断等问题。这减少了等待时间，并改善了迭代开发的流程。

了解有关 [`apply_diff`](/advanced-usage/available-tools/apply-diff) 的更多信息。

---

## API 密钥余额

您现在可以直接在 Roo Code API 提供商设置中方便地检查 OpenRouter 和 Requesty 的当前信用余额。这有助于在不离开编辑器的情况下监控使用情况。
<img src="/img/v3.11/v3.11.png" alt="Roo Code v3.11 功能概览" width="600" />

---

## 项目级 MCP 配置

MCP（模式通信协议）服务器配置现在可以在项目或工作区级别定义，方法是使用项目根目录中的 `.roo/mcp.json` 文件。这允许为不同项目量身定制 MCP 设置，并优先于全局 MCP 设置。您可以直接从 MCP 设置视图管理此文件。（感谢 aheizi！）
<img src="/img/v3.11/v3.11-1.png" alt="项目级 MCP 配置文件示例" width="600" />

了解有关 [编辑 MCP 设置文件](/features/mcp/using-mcp-in-roo#editing-mcp-settings-files) 的更多信息。

---

## 改进的 Gemini 支持

与 Google Gemini 模型的集成已显著增强，以提高可靠性和功能：

*   **更智能的重试逻辑：** Roo Code 现在可以智能处理临时的 Gemini API 问题。它会检测速率限制（HTTP 429），使用 Gemini 错误响应提供的精确重试时间，对其他错误应用指数退避，并显示倒计时器以提高清晰度。这减少了中断，并提供了更流畅的工作流程，尤其是在 API 使用高峰期。
*   **改进的字符转义：** 字符转义问题已得到解决，确保正确处理代码块、复杂 JSON 和非 ASCII 文本中的特殊字符。这带来了更准确的代码生成和响应中更少的语法错误。
*   **Gemini 2.5 Pro 支持：** 通过 GCP Vertex AI 提供商配置添加了对强大的 Gemini 2.5 Pro 模型的支持，为更复杂的任务提供了更大的上下文窗口和输出容量。（感谢 nbihan-mediware！）

---

## 导入/导出设置

<img src="/img/settings-management/settings-management.png" alt="Roo Code 设置中的导出、导入和重置按钮" width="400" />

您现在可以将 Roo Code 设置（API 提供商配置文件、全局设置）导出到 `roo-code-settings.json` 文件以进行备份或共享，并从此类文件导入设置以合并配置。

在主 Roo Code 设置视图中查找这些选项。了解有关 [导入/导出/重置设置](/features/settings-management) 的更多信息。

---

## 固定和排序 API 配置文件

<img src="/img/v3.11/v3.11-2.png" alt="API 配置文件下拉菜单显示固定和排序选项" width="250" />

设置中的 API 配置下拉菜单现在支持将您喜欢的配置文件固定到顶部，并对列表进行排序以便于导航，尤其是在管理多个配置文件时。（感谢 jwcraig！）

了解有关 [固定和排序配置文件](/features/api-configuration-profiles#pinning-and-sorting-profiles) 的更多信息。

---

## 可编辑的建议答案

当 Roo 使用 [`ask_followup_question`](/advanced-usage/available-tools/ask-followup-question) 工具提出后续问题时，提供的建议答案现在可以直接在聊天界面中编辑，然后再接受。这允许快速修改，而无需重新输入整个响应。（感谢 samhvw8！）

了解有关 [与建议交互](/features/suggested-responses#interacting-with-suggestions) 的更多信息。

<img src="/img/suggested-responses/suggested-responses-1.png" alt="聊天输入框显示从建议响应复制的文本，准备进行编辑" width="600" />

---

## 常规改进和错误修复

*   **部分文件读取：** 已对 Roo Code 处理读取大文件部分内容的方式进行了增强。（感谢 KJ7LNW！）
*   **工具调用逻辑重构：** 工具调用机制的内部重构使代码库更易于维护和扩展。（感谢 diarmidmackenzie、bramburn、KJ7LNW 等人！）
*   **“添加到上下文”操作：** 此代码操作现在在菜单中优先级更高，并包含相关的行号以提供更好的上下文。（感谢 samhvw8！）
*   **外部激活命令：** 一个新的命令允许其他 VS Code 扩展以编程方式激活或与 Roo Code 进行接口。（感谢 gtaylor！）
*   **浏览器工具：** 对浏览器交互工具进行了常规改进和修复。（感谢 afshawnlotfi！）
*   **部分读取信息：** 有关部分文件读取（仅处理大文件的一段）的信息现在在聊天界面中显示。
*   **设置链接：** 在自动批准操作工具栏中添加了直接链接到相关设置页面的链接，以便更快访问。
*   **提供商文档链接：** 在 API 配置选项中添加了指向各种模型提供商官方文档的链接。
*   **自定义 OpenAI 兼容模型：** 添加了对使用自定义 `o3-mini-` 模型与 OpenAI 兼容提供商的支持。（感谢 snoyiatk！）
*   在当前任务清除时正确地向 Webview 发布状态（感谢 wkordalski！）。
*   修复了单元测试在 Windows 上正常运行的问题（感谢 StevenTCramer！）。
*   修复了 `apply_diff` 中删除时剥离行号的问题。
*   修复了从下拉菜单访问时提示和设置选项卡无法滚动的问题。
*   修复了 Bedrock 的提示增强（感谢 Smartsheet-JB-Brown！）。
*   修复了 tree-sitter 行号中的差一错误。
*   Tree-sitter 增强：TSX、TypeScript、JSON 和 Markdown 支持（感谢 KJ7LNW！）。
*   更新了历史记录选择模式按钮间距（感谢 kyle-apex！）。
*   将下拉菜单高度限制为视口的 80%（感谢 axmo！）。
*   在 API 失败时启用了模型选择（感谢 kyle-apex！）。
*   将 AWS 区域下拉菜单更新为最新数据（感谢 Smartsheet-JB-Brown！）。
*   使扩展图标在不同主题中更可见。
*   通过 `npm audit fix` 更新了依赖项（感谢 PeterDaveHello！）。
*   允许进程通过 Unix 套接字访问 Roo Code API。
*   改进了 zh-TW 繁体中文翻译（感谢 PeterDaveHello！）。
*   添加了对使用 DeepSeek-V3 模型的 Azure AI 推理服务的支持（感谢 thomasjeung！）。
*   移除了实验性的统一差异。
*   支持对文件名中包含空格的文件进行 @-提及。（感谢 samhvw8！）
*   `list_code_definition_names` 工具现在支持单个文件。（感谢 KJ7LNW！）
*   文件 @-提及现在保留特定于语言的字符。（感谢 aheizi！）
*   修复了 Gemini 命令转义。
*   修复了切换配置文件以确保仅切换所选配置文件（感谢 feifei325！）。