---
description: Roo Code 3.17 整合了所有 v3.17.x 更新，包括智能上下文压缩、Boomerang 改进以及各种错误修复。
keywords:
  - roo code
  - v3.17
  - release notes
  - intelligent context condensation
  - boomerang orchestration
  - gemini caching
  - bug fixes
  - complete changelog
---

# Roo Code 3.17 版本发布说明 (2025-05-14)

此版本带来了 Gemini 隐式缓存、通过“使用时机”指南实现更智能的 Boomerang 编排、“询问”模式和 Boomerang 准确性的优化、实验性的智能上下文压缩功能，以及更流畅的聊天体验。

---

## 通过 Gemini 缓存提升性能
使用支持缓存功能的 Gemini 模型的用户，将因利用隐式缓存而体验到性能提升以及整体成本降低。

---

## 更智能的 Boomerang 编排
Roo Code 现在为选择最适合您任务的模式提供了增强的指南，主要通过模式定义中的新“使用时机”字段实现。此字段允许模式创建者提供关于使用特定模式的最佳场景的具体说明。如果此字段未定义，Roo 将依赖模式角色定义的第一句话作为指导。

*   **“使用时机”字段：** 自定义模式现在可以包含“使用时机”描述。Roo（尤其是[编排器 (Boomerang) 模式](/features/boomerang-tasks)）会利用此文本，在编排任务（例如，通过 [`new_task`](/advanced-usage/available-tools/new-task) 工具）或自动切换模式（例如，通过 [`switch_mode`](/advanced-usage/available-tools/switch-mode) 工具）时做出更明智的决策。
*   **改进的编排：** 通过利用“使用时机”字段，Roo 可以更好地理解每个模式的用途，从而实现更有效的任务委派和模式选择。
*   **回退到角色定义：** 如果模式的“使用时机”字段未填充，Roo 将使用该模式角色定义的第一句话作为默认摘要来指导其决策。

<img src="/img/v3.17.0/v3.17.0.png" alt="image highlighting When to Use field" width="600" />

上图展示了“使用时机”描述的示例。默认情况下，标准[代码模式](/basic-usage/using-modes#code-mode-default)的此字段当前未填充。您可以在[自定义模式文档](/features/custom-modes)中了解有关配置此功能的更多信息。

---

## “询问”模式与 Boomerang 编排优化

我们对 Roo 理解和响应用户请求的方式进行了多项底层优化：

*   **“询问”模式优化：** “询问”模式已优化，以提供更全面和详细的解释，减少急于建议或切换到实现代码的倾向（等待您更明确的提示），并更频繁地使用 Mermaid 图表等图解进行澄清。
*   **更准确的 Boomerang 编排：** 用于启动新任务的 [`new_task`](/advanced-usage/available-tools/new-task) 工具（由 Roo 使用）的内部描述已简化，以便 AI 更好地理解。此内部优化确保了[回飞棒 (编排器) 功能](/features/boomerang-tasks)更可靠地触发，从而实现更流畅、更准确的自动化任务委派。

---

## 通过智能压缩实现更智能的上下文管理
我们引入了一项名为**智能上下文压缩** (`autoCondenseContext`) 的实验性功能，以主动管理冗长的对话历史记录并防止上下文丢失。

其工作原理如下：

*   **自动摘要：** 当对话接近其上下文窗口限制时（具体来说，当上下文窗口几乎满时），Roo Code 现在会自动使用大型语言模型 (LLM) 来总结现有的对话历史记录。
*   **保留关键信息：** 目标是在保留最关键信息的同时减少历史记录的令牌计数，确保 LLM 对过去的交互有连贯的理解。这有助于避免旧消息被静默丢弃。
*   **检查点完整性：** 虽然为持续的 LLM 调用进行了摘要，但当您回退到旧检查点时，所有原始消息都会被保留。
*   **选择加入的实验性功能：** 默认情况下禁用，此功能可在“高级设置”的“实验性功能”下启用。请注意，LLM 调用摘要会产生成本，该成本当前未在 UI 的成本跟踪中显示。

<img src="/img/intelligent-context-condensation/intelligent-context-condensation.png" alt="Settings for Intelligent Context Condensation" width="600" />

有关此功能的更多详细信息，请参阅[智能上下文压缩文档](/features/intelligent-context-condensing)。

---

## 更流畅的聊天体验，更少的中断！ (感谢 Cline！)

我们对 Roo Code 体验进行了一些不错的调整，使其更加出色：

*   **即使 Roo 正在思考，也可以继续输入：** 现在，即使 Roo 正忙于处理您的当前请求，您也可以在聊天中输入下一条消息。无需再等待输入字段解锁——让您的想法自由流动！
*   **查看更改时保持专注：** 我们改进了 Roo Code 在向您展示代码差异时处理光标焦点的方式。这意味着当 Roo 呈现更改以供审查时，对工作流程的干扰更少。

这些改进旨在让您的 Roo Code 交互感觉更流畅，干扰更少。

---

## 更轻松地访问文档
查找帮助和信息现在更简单：
- **更多应用内链接：** 在整个应用程序的设置和视图中添加了超过 20 个新的“了解更多”链接。
- **改进的导航：** 更新了现有文档链接，确保它们引导您找到最相关的信息。

---

## 常规生活质量改进

*   **改进的命令执行显示：** 用于显示命令执行的用户界面已得到改进。
*   **更可靠的 Apply Diff 工具：** `apply_diff` 工具现在能更好地处理行号。(感谢 samhvw8！)
*   **更快的消息解析：** 我们已切换到一种性能更高的消息处理方式。(感谢 Cline！)

---

## 错误修复

*   **修复灰屏问题：** 我们已解决可能出现的视觉错误。(感谢 xyOz-dev！)
*   **准确的令牌使用报告：** 对于 Requesty API 提供者的用户，令牌使用报告现在更准确。(感谢 dtrugman！)
*   **改进的命令验证：** 使用 shell 数组索引的命令现在可以正确验证。(感谢 KJ7LNW！)
*   **目录诊断的优雅处理：** 应用程序现在可以平稳地处理与目录相关的诊断信息。(感谢 daniel-lxs！)
*   **准确的 OpenRouter 模型信息：** 如果您将 OpenRouter 与不同的提供者一起使用，您将看到更准确的详细信息。(感谢 daniel-lxs！)
*   **减少检查点错误：** 如果您使用检查点，应该会遇到的错误更少。(感谢 zxdvd！)
*   修复了执行审批期间命令的显示。
*   修复了 OpenRouter 上保留令牌计算错误的问题 (感谢 daniel-lxs！)。
*   由于工具解析错误，我们已恢复使用新的 Roo 消息解析器。

---

## 其他改进

*   **增强的调试功能：** 我们让开发人员更容易诊断和修复问题。(感谢 KJ7LNW！)
*   **改进集成的开发人员体验：** 我们为开发与 Roo Code 交互的工具的开发人员添加了更好的支持。
*   **简化的开发工作流程：** 我们对内部开发流程进行了改进。(感谢 SmartManoj！)