---
description: Roo Code 2.2 引入了 MCP 支持以使用自定义工具、API 配置方案、增强的差异编辑功能，以及众多提升使用体验的改进。
keywords:
  - roo code
  - v2.2
  - mcp support
  - model context protocol
  - api profiles
  - diff editing
  - auto-approval
  - custom tools
  - release notes
---

# Roo Code 2.2 版本发布说明 (2025-02-27)

此版本周期引入了模型上下文协议 (MCP) 支持，可使用自定义工具，以及众多用于更精细控制 API 请求、差异编辑、自动批准和各种体验改进及错误修复的设置。

---

## 主要功能与增强

*   **模型上下文协议 (MCP) 支持 (v2.2.0)：**
    *   添加了 MCP 支持，使 Roo Code 能够使用自定义工具，如网络搜索或 GitHub 工具。
    *   添加了 MCP 服务器管理选项卡。
    *   使 Roo Code 能够根据用户请求动态创建新的 MCP 服务器。
*   **API 配置方案 (v2.2.45)：** 添加了保存不同 API 配置的功能，以便在提供程序和设置之间快速切换。（感谢 @samhvw8！）
*   **可配置的 API 请求重试 (v2.2.44)：** 允许对失败的 API 请求进行自动重试，并可配置延迟。（感谢 @RaySinner！）
*   **消息删除 (v2.2.43)：** 添加了删除单条消息或所有后续消息的功能。
*   **Git 上下文提及 (v2.2.42)：** 在上下文提及中添加了 Git 部分。
*   **差异编辑（实验性 & 改进）(v2.1.12 - v2.2.24)：**
    *   集成了通过差异进行编辑的实验性支持。（感谢 @JoziGila！）
    *   在实验模式下切换到搜索/替换差异。
    *   使差异编辑更加稳健，并修复了各种错误（缩进、Windows 换行符）。
    *   添加了用于详细差异调试的设置。
    *   对于新安装，默认启用差异编辑。
    *   使模糊差异匹配可配置（默认关闭）。
*   **自动批准设置：**
    *   支持自动批准写入操作和命令执行。(v2.1.2)
    *   添加了自动批准 MCP 工具的复选框。(v2.2.2)
    *   改进了自动批准链式命令的逻辑。(v2.2.31, v2.2.17)
    *   添加了自动写入后用于诊断的可配置延迟。(v2.2.29)

---

## 提供程序更新

*   **Glama 提供程序 (v2.2.40)：** 添加了 Glama 提供程序。（感谢 @punkpeye！）
*   **DeepSeek 提供程序 (v2.2.34)：** 添加了 DeepSeek 提供程序。
*   **通过 Bedrock 的 Amazon Nova & Meta Llama (v2.2.16)：** 添加了对通过 Bedrock 的 Amazon Nova 和 Meta Llama 模型 (3, 3.1, 3.2) 的支持。（感谢 Premshay！）
*   **Gemini 2.0 (v2.1.20) & Flash 实验性 (v2.2.22, v2.2.23)：** 添加了 Gemini 2.0 和实验性 Flash 模型，并修复了上下文窗口。（感谢 student20880 的修复）

---

## 体验改进与用户界面

*   **禁用流式传输（与 OpenAI 兼容）(v2.2.41)：** 添加了用于禁用与 OpenAI 兼容的提供程序的流式传输的复选框。
*   **MCP 提示切换 (v2.2.39)：** 添加了用于启用/禁用系统提示中与 MCP 相关的部分的切换开关。（感谢 @daniel-lxs！）
*   **终端输出行数设置 (v2.2.38)：** 添加了用于控制传递给模型的终端输出行数的设置。
*   **浏览器视口和截图质量 (v2.2.35)：** 允许选择多个浏览器视口大小并调整截图质量。添加了实验性的 1280x800 浏览器。(v2.2.19)
*   **“增强提示”按钮 (OpenRouter) (v2.2.33)：** 添加了“增强提示”按钮（最初仅适用于 OpenRouter 模型）。
*   **列出与 OpenAI 兼容的模型 (v2.2.33)：** 支持列出与 OpenAI 兼容的提供程序的模型。（感谢 @samhvw8！）
*   **系统提示中的当前时间 (v2.2.27)：** 在系统提示中添加了当前时间。（感谢 @libertyteeth！）
*   **首选语言下拉菜单 (v2.2.25)：** 添加了首选语言下拉菜单，并进行了一些调整。（感谢 @yongjer 的调整）
*   **更大的文本区域输入和图像拖放 (v2.1.21)：** 实现了更大的文本区域输入，并具有图像拖放功能。
*   **从历史记录复制提示 (v2.1.16)。**
*   **更清晰的差异编辑实验状态 (v2.1.15)。**
*   **音效 (v2.1.10 & v2.1.13)：** 集成了音效，并修复了设置尊重问题。（感谢 @HeavenOSK！）
*   **设置中的 .clinerules 说明 (v2.1.9)。**
*   **MCP 服务器启用/禁用 (v2.2.5)。**
*   **清理设置屏幕 (v2.2.3)。**

---

## 错误修复

*   **@-提及解析 (v2.2.46)：** 仅在用户输入中解析 @-提及，而不是在文件中。
*   **工作区跟踪器效率 (v2.2.32)。**
*   **自动批准命令 (v2.2.30)。**
*   **@-提及的文件监视器 (v2.2.28)：** 使用 `createFileSystemWatcher` 以获得更可靠的更新。
*   **Gemini 聊天样式 (v2.2.18)。**
*   **差异 `write_to_file` 拒绝 (v2.1.14)：** 如果启用了差异，则自动拒绝导致输出截断的 `write_to_file` 命令。

---

## 其他改进

*   **Roo Cline 在所有与 VSCode 兼容的编辑器中运行 (v2.1.6)。**
*   **Roo Cline 与 Cline 并排运行 (v2.1.4)。**
*   **浏览器操作批准 (v2.1.3, v2.1.5)：** 当 `alwaysAllowBrowser` 为 true 时，允许浏览器操作无需批准，并进行了修复。
*   **更新了扩展图标和元数据 (v2.1.7)。**