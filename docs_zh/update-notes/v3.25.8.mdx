---
description: 修复长时间对话中的内存泄漏问题，增强 Gemini 2.5 Pro 思考预算的灵活性，以及多项稳定性改进。
keywords:
  - roo code 3.25.8
  - memory leak fix
  - gemini thinking budget
  - bug fixes
---

# Roo Code 3.25.8 版本发布说明 (2025-08-06)

此版本修复了长时间对话中的关键内存泄漏问题，防止已禁用的 MCP 服务器启动，并为 Gemini 2.5 Pro 的思考预算提供了更大的灵活性，同时带来了多项稳定性改进。

## 已禁用的 MCP 服务器不再启动

我们修复了一个严重问题：已禁用的 MCP 服务器仍会启动进程并消耗资源 ([#6084](https://github.com/RooCodeInc/Roo-Code/pull/6084))：

- **无资源浪费**：已禁用的服务器现在真正保持禁用状态，不会启动后台进程
- **清晰的状态指示**：服务器状态现在能准确反映服务器是启用还是禁用
- **即时清理**：当 MCP 全局禁用时，所有服务器会立即断开连接

这确保您的系统资源仅用于您实际希望运行的 MCP 服务器。

## 长时间对话的内存泄漏修复

我们解决了长时间对话中导致内存使用过多和灰色屏幕的关键内存泄漏问题（感谢 xyOz-dev！） ([#6697](https://github.com/RooCodeInc/Roo-Code/pull/6697))：

- **有界内存使用**：虚拟滚动现在将视口渲染限制在当前视图下方 1000px，而不是无限渲染
- **优化的缓存**：减少缓存大小和 TTL，防止内存累积
- **稳定的性能**：无论对话长度如何，内存使用量都保持恒定

您的长时间对话现在将保持响应迅速且稳定，不会出现可怕的灰色屏幕。

## Gemini 2.5 Pro 思考预算灵活性

Gemini 2.5 Pro 用户现在对思考预算有了更大的控制权 ([#6588](https://github.com/RooCodeInc/Roo-Code/pull/6588))：

- **更低的下限**：最小思考预算从 1024 个 token 减少到 128 个 token
- **更简洁的编码**：非常适合需要快速、专注响应而无需广泛推理的任务
- **需要手动调整**：您需要在设置中手动将思考预算调整为 128 才能利用此功能

此更改让您可以根据需求灵活优化深度推理或更简洁、快速的响应。

## Bug 修复

* **MCP 服务器刷新**：设置更改不再触发不必要的 MCP 服务器刷新 ([#6779](https://github.com/RooCodeInc/Roo-Code/pull/6779))
* **代码库搜索**：使用 "." 作为路径时，工具现在能正确搜索整个工作区 ([#6517](https://github.com/RooCodeInc/Roo-Code/pull/6517))
* **Swift 文件支持**：修复了在索引包含 Swift 文件的项目时 VS Code 崩溃的问题（感谢 niteshbalusu11, sealad886！） ([#6724](https://github.com/RooCodeInc/Roo-Code/pull/6724))
* **上下文管理**：模型最大 token 数现在智能地限制在上下文窗口的 20%，以防止过度压缩 ([#6761](https://github.com/RooCodeInc/Roo-Code/pull/6761))
* **OpenAI 配置**：基础 URL 中的额外空格不再破坏模型检测（感谢 vauhochzett！） ([#6560](https://github.com/RooCodeInc/Roo-Code/pull/6560))
* **URL 获取**：从 URL 获取内容时提供更好的错误恢复（感谢 QuinsZouls！） ([#6635](https://github.com/RooCodeInc/Roo-Code/pull/6635))
* **Qdrant 恢复**：当 Qdrant 在启动错误后变为可用时，代码索引会自动恢复 ([#6661](https://github.com/RooCodeInc/Roo-Code/pull/6661))
* **聊天滚动**：消除消息流式传输期间的滚动抖动 ([#6780](https://github.com/RooCodeInc/Roo-Code/pull/6780))