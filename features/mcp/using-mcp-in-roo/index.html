<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-features/mcp/using-mcp-in-roo" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">在 Roo Code 中使用 MCP | Roo Code Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://docs.roocode.com/features/mcp/using-mcp-in-roo"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:site" content="@roocode"><meta data-rh="true" name="twitter:creator" content="@roocode"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="在 Roo Code 中使用 MCP | Roo Code Documentation"><meta data-rh="true" name="description" content="在 Roo Code 中使用 Model Context Protocol (MCP) 的完整指南。学习如何配置 MCP 服务器、管理工具以及扩展 Roo Code 的功能。"><meta data-rh="true" property="og:description" content="在 Roo Code 中使用 Model Context Protocol (MCP) 的完整指南。学习如何配置 MCP 服务器、管理工具以及扩展 Roo Code 的功能。"><meta data-rh="true" name="keywords" content="MCP,Model Context Protocol,MCP 服务器,Roo Code 集成,外部工具,API 集成"><meta data-rh="true" property="og:image" content="https://docs.roocode.com/img/social-share.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.roocode.com/img/social-share.jpg"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.roocode.com/features/mcp/using-mcp-in-roo"><link data-rh="true" rel="alternate" href="https://docs.roocode.com/features/mcp/using-mcp-in-roo" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.roocode.com/features/mcp/using-mcp-in-roo" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"在 Roo Code 中使用 MCP","item":"https://docs.roocode.com/features/mcp/using-mcp-in-roo"}]}</script><link rel="stylesheet" href="/assets/css/styles.e99d68c6.css">
<script src="/assets/js/runtime~main.ebede6eb.js" defer="defer"></script>
<script src="/assets/js/main.0b46f6f8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/roo-code-logo-dark.svg"><link rel="preload" as="image" href="/img/roo-code-logo-white.svg"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-10.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-9.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-2.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-3.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-8.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-4.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-5.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-6.png"><link rel="preload" as="image" href="/img/using-mcp-in-roo/using-mcp-in-roo-7.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/roo-code-logo-dark.svg" alt="Roo Code Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/roo-code-logo-white.svg" alt="Roo Code Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--center"><div class="navbarSearchContainer_dCNk"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="searchBarLoadingRing_YnHq"></div></div></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="socialIcons_HJHc"><a href="https://www.reddit.com/r/RooCode/" target="_blank" rel="noopener noreferrer" class="socialLink_raBN" title="Reddit" aria-label="Reddit"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></a><a href="https://discord.gg/roocode" target="_blank" rel="noopener noreferrer" class="socialLink_raBN" title="Discord" aria-label="Discord"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></a></div><div class="container_MBB3"><a href="https://github.com/RooCodeInc/Roo-Code" target="_blank" rel="noopener noreferrer" class="githubButton_m6zQ" title="GitHub Repository"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 15 15" class="icon_I806" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z" fill="currentColor"></path></svg><span>15.4k</span></a><a href="https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline" target="_blank" rel="noopener noreferrer" class="installButton_U1Rr" title="Install VS Code Extension"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="icon_I806" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10.8634 13.9195C10.6568 14.0195 10.4233 14.0246 10.2185 13.9444C10.1162 13.9044 10.021 13.843 9.93997 13.7614L4.81616 9.06268L2.58433 10.7656C2.37657 10.9241 2.08597 10.9111 1.89301 10.7347L1.17719 10.0802C0.941168 9.86437 0.940898 9.49112 1.17661 9.27496L3.11213 7.5L1.17661 5.72504C0.940898 5.50888 0.941168 5.13563 1.17719 4.91982L1.89301 4.2653C2.08597 4.08887 2.37657 4.07588 2.58433 4.2344L4.81616 5.93732L9.93997 1.23855C9.97037 1.20797 10.0028 1.18023 10.0368 1.15538C10.2748 0.981429 10.5922 0.949298 10.8634 1.08048L13.5399 2.37507C13.8212 2.5111 14 2.79721 14 3.11109V8H10.752V4.53356L6.86419 7.5L10.752 10.4664V8H14V11.8889C14 12.2028 13.8211 12.4889 13.5399 12.625L10.8634 13.9195Z"></path></svg><span>Install <span class="separator_XjHL">·</span></span><span>574.1k</span></a></div><button class="themeToggle_Agwr colorModeToggle_x44X" aria-label="Toggle theme" title="Toggle theme"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 15 15" class="icon_DZW4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z" fill="currentColor"></path></svg></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="欢迎" class="linkLabel_WmDU">欢迎</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/getting-started/installing"><span title="Roo Code VSCode Extension" class="categoryLinkLabel_W154">Roo Code VSCode Extension</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/installing"><span title="安装 Roo Code" class="linkLabel_WmDU">安装 Roo Code</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/connecting-api-provider"><span title="连接 AI 提供商" class="linkLabel_WmDU">连接 AI 提供商</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/your-first-task"><span title="你的第一个任务" class="linkLabel_WmDU">你的第一个任务</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-usage/the-chat-interface"><span title="聊天界面" class="linkLabel_WmDU">聊天界面</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-usage/typing-your-requests"><span title="输入你的请求" class="linkLabel_WmDU">输入你的请求</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-usage/how-tools-work"><span title="工具的工作原理" class="linkLabel_WmDU">工具的工作原理</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-usage/context-mentions"><span title="上下文提及" class="linkLabel_WmDU">上下文提及</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/basic-usage/using-modes"><span title="使用模式" class="linkLabel_WmDU">使用模式</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tips-and-tricks"><span title="Tips &amp; Tricks" class="linkLabel_WmDU">Tips &amp; Tricks</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/features/api-configuration-profiles"><span title="Features" class="categoryLinkLabel_W154">Features</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/features/mcp/overview"><span title="MCP" class="categoryLinkLabel_W154">MCP</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/features/mcp/overview"><span title="MCP 概述" class="linkLabel_WmDU">MCP 概述</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/features/mcp/using-mcp-in-roo"><span title="在 Roo Code 中使用 MCP" class="linkLabel_WmDU">在 Roo Code 中使用 MCP</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/features/mcp/what-is-mcp"><span title="什么是 MCP？" class="linkLabel_WmDU">什么是 MCP？</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/features/mcp/server-transports"><span title="STDIO、可流式 HTTP 与 SSE 传输" class="linkLabel_WmDU">STDIO、可流式 HTTP 与 SSE 传输</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/features/mcp/mcp-vs-api"><span title="MCP vs API" class="linkLabel_WmDU">MCP vs API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/features/mcp/recommended-mcp-servers"><span title="推荐的 MCP 服务器" class="linkLabel_WmDU">推荐的 MCP 服务器</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/features/experimental/experimental-features"><span title="Experimental" class="categoryLinkLabel_W154">Experimental</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/advanced-usage/available-tools/tool-use-overview"><span title="Advanced Usage" class="categoryLinkLabel_W154">Advanced Usage</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/roo-code-cloud/overview"><span title="Roo Code Cloud" class="categoryLinkLabel_W154">Roo Code Cloud</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/roo-code-provider/overview"><span title="Roo Code Cloud Provider" class="linkLabel_WmDU">Roo Code Cloud Provider</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/credits/overview"><span title="Roo Code Credits" class="linkLabel_WmDU">Roo Code Credits</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tutorial-videos"><span title="Tutorial Videos" class="linkLabel_WmDU">Tutorial Videos</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/providers/"><span title="Model Providers" class="categoryLinkLabel_W154">Model Providers</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/update-notes/"><span title="Extension Release Notes" class="categoryLinkLabel_W154">Extension Release Notes</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/RooCodeInc/Roo-Code/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Contributing (GitHub)" class="linkLabel_WmDU">Contributing (GitHub)</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/cannuri/Roocabulary" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Roocabulary (GitHub)" class="linkLabel_WmDU">Roocabulary (GitHub)</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><div class="breadcrumbsWrapper_NBHK"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Roo Code VSCode Extension</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">MCP</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">在 Roo Code 中使用 MCP</span></li></ul><button class="copyButton_NdLO copy-button" title="Copy page content" aria-label="Copy page content to clipboard"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="icon_iRRv" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"></path></svg></button></div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown doc-container"><header><h1>在 Roo Code 中使用 MCP</h1></header>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>对 MCP 服务器感到困惑？</div><div class="admonitionContent_BuS1"><p>MCP（Model Context Protocol）服务器充当桥梁，为 Roo Code 提供更广泛的 <strong>工具</strong> 和外部服务（如数据库、API 或自定义脚本）的访问权限。它使用标准通信方法，允许 Roo 利用这些外部功能。</p><p>如需深入了解，请查看 <a class="" href="/features/mcp/what-is-mcp">什么是 MCP？</a>。</p></div></div>
<p>Model Context Protocol (MCP) 通过连接外部工具和服务来扩展 Roo Code 的功能。本指南涵盖在 Roo Code 中使用 MCP 所需了解的所有内容。</p>
<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden"><iframe src="https://www.youtube.com/embed/VAbadUDhH5c" style="position:absolute;top:0;left:0;width:100%;height:100%" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe></div>
<br>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="配置-mcp-服务器">配置 MCP 服务器<a href="#配置-mcp-服务器" class="hash-link" aria-label="Direct link to 配置 MCP 服务器" title="Direct link to 配置 MCP 服务器" translate="no">​</a></h2>
<p>MCP 服务器配置可以在两个级别管理：</p>
<ol>
<li class=""><strong>全局配置</strong>：存储在 <code>mcp_settings.json</code> 文件中，可通过 VS Code 设置访问（见下文）。这些设置在所有工作区中生效，除非被项目级配置覆盖。</li>
<li class=""><strong>项目级配置</strong>：在项目根目录的 <code>.roo/mcp.json</code> 文件中定义。这允许您为特定项目设置服务器，并通过将文件提交到版本控制与团队共享配置。Roo Code 会自动检测并加载此文件（如果存在）。</li>
</ol>
<p><strong>优先级</strong>：如果服务器名称在全局和项目配置中都存在，<strong>项目级配置优先</strong>。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="编辑-mcp-设置文件">编辑 MCP 设置文件<a href="#编辑-mcp-设置文件" class="hash-link" aria-label="Direct link to 编辑 MCP 设置文件" title="Direct link to 编辑 MCP 设置文件" translate="no">​</a></h3>
<p>您可以直接从 Roo Code MCP 设置视图编辑全局和项目级 MCP 配置文件：</p>
<ol>
<li class="">点击 Roo Code 窗格顶部导航中的 <i class="codicon codicon-server" aria-hidden="true"></i> 图标。</li>
</ol>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-10.png" alt="Roo Code 中的 MCP 服务器界面" width="400">
<ol start="2">
<li class="">滚动到 MCP 设置视图底部。</li>
<li class="">点击相应的按钮：<!-- -->
<ul>
<li class=""><strong><code>Edit Global MCP</code></strong>：打开全局 <code>mcp_settings.json</code> 文件。</li>
<li class=""><strong><code>Edit Project MCP</code></strong>：打开项目特定的 <code>.roo/mcp.json</code> 文件。如果此文件不存在，Roo Code 将为您创建它。</li>
</ul>
</li>
</ol>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-9.png" alt="编辑全局 MCP 和编辑项目 MCP 按钮" width="600">
<p>两个文件都使用 JSON 格式，包含 <code>mcpServers</code> 对象，其中包含命名的服务器配置：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;mcpServers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;server1&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;command&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;python&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;args&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/path/to/server.py&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;env&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;API_KEY&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;your_api_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;alwaysAllow&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;tool1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;tool2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;disabled&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p><em>Roo Code 中 MCP 服务器配置示例（STDIO 传输）</em></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="理解传输类型">理解传输类型<a href="#理解传输类型" class="hash-link" aria-label="Direct link to 理解传输类型" title="Direct link to 理解传输类型" translate="no">​</a></h3>
<p>MCP 支持三种服务器通信传输类型：用于本地服务器的 STDIO、用于新远程服务器的流式 HTTP（推荐），以及用于旧远程服务器的 SSE（Server-Sent Events）。</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="stdio-传输">STDIO 传输<a href="#stdio-传输" class="hash-link" aria-label="Direct link to STDIO 传输" title="Direct link to STDIO 传输" translate="no">​</a></h4>
<p>用于在本地机器上运行的本地服务器：</p>
<ul>
<li class="">通过标准输入/输出流通信</li>
<li class="">延迟较低（无网络开销）</li>
<li class="">安全性更好（无网络暴露）</li>
<li class="">设置更简单（无需 HTTP 服务器）</li>
<li class="">作为子进程在您的机器上运行</li>
</ul>
<p>有关 STDIO 传输工作原理的更深入信息，请参阅 <a class="" href="/features/mcp/server-transports#stdio-transport">STDIO 传输</a>。</p>
<p>STDIO 配置参数：</p>
<ul>
<li class=""><code>command</code>（必需）：要运行的可执行文件（例如 <code>node</code>、<code>python</code>、<code>npx</code> 或绝对路径）。</li>
<li class=""><code>args</code>（可选）：传递给命令的字符串参数数组。您可以使用 <code>${env:VARIABLE_NAME}</code> 语法引用系统环境变量。</li>
<li class=""><code>cwd</code>（可选）：启动服务器进程的工作目录。如果省略，默认为第一个工作区文件夹路径或主进程的工作目录。如果服务器脚本依赖相对路径，这很有用。</li>
<li class=""><code>env</code>（可选）：为服务器进程设置的环境变量对象。</li>
<li class=""><code>alwaysAllow</code>（可选）：从此服务器自动批准的工具名称数组。</li>
<li class=""><code>disabled</code>（可选）：设置为 <code>true</code> 以禁用此服务器配置。</li>
</ul>
<p>STDIO 配置示例：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;mcpServers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;local-server&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;command&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;node&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;args&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;server.js&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;cwd&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/path/to/project/root&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// 可选：指定工作目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;env&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;API_KEY&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;your_api_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;alwaysAllow&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;tool1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;tool2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;disabled&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="在参数中使用系统环境变量">在参数中使用系统环境变量<a href="#在参数中使用系统环境变量" class="hash-link" aria-label="Direct link to 在参数中使用系统环境变量" title="Direct link to 在参数中使用系统环境变量" translate="no">​</a></h4>
<p>您可以在 <code>args</code> 数组中使用 <code>${env:VARIABLE_NAME}</code> 语法引用系统级环境变量。这允许您从系统环境传递敏感信息（如 API 密钥或令牌），而无需在配置文件中硬编码：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;mcpServers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;github&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;command&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;docker&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;args&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;run&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-i&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;--rm&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-e&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;GITHUB_PERSONAL_ACCESS_TOKEN=${env:GITHUB_PERSONAL_ACCESS_TOKEN}&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ghcr.io/github/github-mcp-server&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;alwaysAllow&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;get_pull_request&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p>在此示例中，<code>${env:GITHUB_PERSONAL_ACCESS_TOKEN}</code> 将被替换为系统环境中的 <code>GITHUB_PERSONAL_ACCESS_TOKEN</code> 环境变量的值。这在以下情况下特别有用：</p>
<ul>
<li class="">使用需要环境变量传递的 Docker 容器</li>
<li class="">将敏感凭据保留在配置文件之外</li>
<li class="">在具有不同凭据的不同环境中使用相同的配置</li>
</ul>
<p><strong>注意</strong>：环境变量必须存在于您的系统环境中才能生效。您可以通过操作系统的设置或 shell 配置文件（例如 <code>.bashrc</code>、<code>.zshrc</code> 或 Windows 环境变量）设置系统环境变量。</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="流式-http-传输">流式 HTTP 传输<a href="#流式-http-传输" class="hash-link" aria-label="Direct link to 流式 HTTP 传输" title="Direct link to 流式 HTTP 传输" translate="no">​</a></h4>
<p>这是通过 HTTP/HTTPS 访问远程服务器的 <strong>现代标准</strong>，提供更大的灵活性，并取代旧的 SSE 传输用于新实现。</p>
<ul>
<li class="">通过单个 MCP 端点的 HTTP POST/GET 通信</li>
<li class="">可选使用 Server-Sent Events (SSE) 进行流式传输</li>
<li class="">可托管在不同机器上</li>
<li class="">支持多个客户端连接</li>
<li class="">需要网络访问</li>
<li class="">允许集中部署和管理</li>
</ul>
<p>有关流式 HTTP 传输工作原理的更深入信息，请参阅 <a class="" href="/features/mcp/server-transports#streamable-http-transport">流式 HTTP 传输</a>。</p>
<p>流式 HTTP 配置参数：</p>
<ul>
<li class=""><code>type</code>（必需）：必须设置为 <code>&quot;streamable-http&quot;</code>。</li>
<li class=""><code>url</code>（必需）：远程 MCP 服务器单个端点的完整 URL（例如 <code>https://your-server.com/mcp</code>）。</li>
<li class=""><code>headers</code>（可选）：包含随请求发送的自定义 HTTP 头的对象（例如用于身份验证令牌）。</li>
<li class=""><code>alwaysAllow</code>（可选）：从此服务器自动批准的工具名称数组。</li>
<li class=""><code>disabled</code>（可选）：设置为 <code>true</code> 以禁用此服务器配置。</li>
</ul>
<p>流式 HTTP 配置示例：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;mcpServers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;modern-remote-server&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;streamable-http&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;url&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://your-modern-server.com/api/mcp-endpoint&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;headers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;X-API-Key&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;your-secure-api-key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;alwaysAllow&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;newToolA&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;newToolB&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;disabled&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="sse-传输旧版">SSE 传输（旧版）<a href="#sse-传输旧版" class="hash-link" aria-label="Direct link to SSE 传输（旧版）" title="Direct link to SSE 传输（旧版）" translate="no">​</a></h4>
<p>用于通过 HTTP/HTTPS 访问的旧远程服务器。<strong>对于新的远程服务器实现，建议使用 <a href="#streamable-http-transport" class="">流式 HTTP 传输</a>。</strong></p>
<ul>
<li class="">通过 Server-Sent Events 协议通信（通常需要客户端到服务器和服务器到客户端的单独端点）</li>
<li class="">可托管在不同机器上</li>
<li class="">支持多个客户端连接</li>
<li class="">需要网络访问</li>
<li class="">允许集中部署和管理</li>
</ul>
<p>有关旧 SSE 传输工作原理的更深入信息，请参阅 <a class="" href="/features/mcp/server-transports#sse-transport-legacy">SSE 传输（旧版）</a>。</p>
<p>SSE（旧版）配置参数：</p>
<ul>
<li class=""><code>type</code>（可选，但建议用于清晰度）：如果为 SSE 服务器提供 <code>url</code>，应设置为 <code>&quot;sse&quot;</code>，以区别于流式 HTTP。如果存在 <code>url</code> 且省略 <code>type</code>，Roo Code 可能尝试推断，但显式声明更安全。</li>
<li class=""><code>url</code>（必需）：远程 MCP 服务器的基 URL。对于旧 SSE，这通常意味着将派生或期望单独的路径，如 <code>/events</code>（用于 SSE 流）和 <code>/message</code>（用于 POST 请求）。</li>
<li class=""><code>headers</code>（可选）：包含随请求发送的自定义 HTTP 头的对象（例如用于身份验证令牌）。</li>
<li class=""><code>alwaysAllow</code>（可选）：从此服务器自动批准的工具名称数组。</li>
<li class=""><code>disabled</code>（可选）：设置为 <code>true</code> 以禁用此服务器配置。</li>
</ul>
<p>SSE（旧版）配置示例：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;mcpServers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;legacy-remote-server&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sse&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// 显式定义为 SSE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;url&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://your-legacy-server-url.com/mcp-base&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// 基 URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;headers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;Authorization&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Bearer your-legacy-token&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;alwaysAllow&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;oldToolX&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;disabled&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="启用或禁用-mcp-服务器">启用或禁用 MCP 服务器<a href="#启用或禁用-mcp-服务器" class="hash-link" aria-label="Direct link to 启用或禁用 MCP 服务器" title="Direct link to 启用或禁用 MCP 服务器" translate="no">​</a></h2>
<p>在此处禁用 MCP 服务器将移除所有与 MCP 相关的逻辑和定义，减少您的令牌使用量。这将阻止 Roo Code 连接到任何 MCP 服务器，<code>use_mcp_tool</code> 和 <code>access_mcp_resource</code> 工具将不可用。如果您不打算使用 MCP 服务器，请取消选中此项。默认情况下此选项为开启状态。</p>
<ol>
<li class="">点击 Roo Code 窗格顶部导航中的 <i class="codicon codicon-server" aria-hidden="true"></i> 图标</li>
<li class="">选中/取消选中 <code>Enable MCP Servers</code></li>
</ol>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-2.png" alt="启用 MCP 服务器切换" width="400">
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="启用或禁用-mcp-服务器创建">启用或禁用 MCP 服务器创建<a href="#启用或禁用-mcp-服务器创建" class="hash-link" aria-label="Direct link to 启用或禁用 MCP 服务器创建" title="Direct link to 启用或禁用 MCP 服务器创建" translate="no">​</a></h2>
<p>在此处禁用 MCP 服务器创建将仅从您的系统提示中移除 Roo Code 用于编写 MCP 服务器的指令，而不会移除与操作它们相关的上下文。这减少了令牌使用量。默认情况下此选项为开启状态。</p>
<ol>
<li class="">点击 Roo Code 窗格顶部导航中的 <i class="codicon codicon-server" aria-hidden="true"></i> 图标</li>
<li class="">选中/取消选中 <code>Enable MCP Server Creation</code></li>
</ol>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-3.png" alt="启用 MCP 服务器创建切换" width="400">
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="如何使用-roo-创建-mcp-服务器">如何使用 Roo 创建 MCP 服务器<a href="#如何使用-roo-创建-mcp-服务器" class="hash-link" aria-label="Direct link to 如何使用 Roo 创建 MCP 服务器" title="Direct link to 如何使用 Roo 创建 MCP 服务器" translate="no">​</a></h2>
<p>如果您需要现有 MCP 服务器无法提供的特定工具或功能，可以要求 Roo Code 为您构建一个。</p>
<p><strong>前提条件</strong>：确保在 MCP 设置面板中 <strong><a href="#enabling-or-disabling-mcp-server-creation" class="">启用 MCP 服务器创建</a></strong> 设置为开启状态。如果此设置被禁用，Roo 将没有必要的指令来构建服务器。</p>
<p><strong>如何启动：</strong></p>
<ol>
<li class="">
<p><strong>提出请求</strong>：清楚地向 Roo 请求新工具或功能。例如：</p>
<ul>
<li class="">&quot;创建一个获取比特币当前价格的 MCP 工具。&quot;</li>
<li class="">&quot;我需要一个通过其 API 连接到我公司内部用户数据库的工具。&quot;</li>
<li class="">&quot;构建一个与 GitHub Gist API 交互的 MCP 服务器。&quot;</li>
</ul>
</li>
<li class="">
<p><strong>Roo 的流程（简化）</strong>：一旦您提出请求（且设置已启用），Roo 将：</p>
<ul>
<li class="">获取服务器创建的内部指令。</li>
<li class="">在默认 MCP 目录（例如 macOS 上的 <code>~/Documents/Cline/MCP</code>）中创建基本服务器项目（通常是 TypeScript），除非您另有指定。</li>
<li class="">编写实现请求工具的代码，包括处理必要的 API 调用。</li>
<li class=""><strong>处理凭据</strong>：如果工具需要 API 密钥或其他凭据，Roo 将使用 <a class="" href="/advanced-usage/available-tools/ask-followup-question"><code>ask_followup_question</code></a> 工具询问您，以确保它们作为环境变量安全配置给服务器。</li>
<li class=""><strong>配置</strong>：自动将新服务器的配置添加到您的全局 <code>mcp_settings.json</code> 或项目 <code>.roo/mcp.json</code> 文件中。</li>
<li class=""><strong>激活</strong>：尝试连接到新配置的服务器，使其工具立即可用。</li>
</ul>
</li>
<li class="">
<p><strong>结果</strong>：如果成功，Roo 将确认创建，新服务器及其工具将出现在您的 MCP 服务器列表中，随时可用。</p>
</li>
</ol>
<p>此功能允许您通过让 Roo 直接从您的请求构建特定集成来定制 Roo 的功能。有关内部机制的深入分析，请参阅 <a class="" href="/advanced-usage/available-tools/tool-use-overview#tool-calling-mechanism">工具调用机制</a>。</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="管理单个-mcp-服务器">管理单个 MCP 服务器<a href="#管理单个-mcp-服务器" class="hash-link" aria-label="Direct link to 管理单个 MCP 服务器" title="Direct link to 管理单个 MCP 服务器" translate="no">​</a></h2>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-8.png" alt="MCP 服务器配置面板示例" width="400">
<p>每个 MCP 服务器都有自己的配置面板，您可以在其中修改设置、管理工具并控制其操作。要访问这些设置：</p>
<ol>
<li class="">点击 Roo Code 窗格顶部导航中的 <i class="codicon codicon-server" aria-hidden="true"></i> 图标</li>
<li class="">在列表中找到要管理的 MCP 服务器<!-- -->
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-4.png" alt="MCP 服务器列表" width="400">
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="删除服务器">删除服务器<a href="#删除服务器" class="hash-link" aria-label="Direct link to 删除服务器" title="Direct link to 删除服务器" translate="no">​</a></h3>
<ol>
<li class="">按下 MCP 服务器旁边的 <i class="codicon codicon-trash" aria-hidden="true"></i> 按钮</li>
<li class="">在确认框中按 <code>Delete</code> 按钮</li>
</ol>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-5.png" alt="删除确认框" width="400">
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="重启服务器">重启服务器<a href="#重启服务器" class="hash-link" aria-label="Direct link to 重启服务器" title="Direct link to 重启服务器" translate="no">​</a></h3>
<ol>
<li class="">按下要重启的 MCP 服务器旁边的 <i class="codicon codicon-refresh" aria-hidden="true"></i> 按钮</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="启用或禁用服务器">启用或禁用服务器<a href="#启用或禁用服务器" class="hash-link" aria-label="Direct link to 启用或禁用服务器" title="Direct link to 启用或禁用服务器" translate="no">​</a></h3>
<ol>
<li class="">按下 MCP 服务器旁边的 <i class="codicon codicon-activate" aria-hidden="true"></i> 切换开关以启用/禁用它</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="网络超时">网络超时<a href="#网络超时" class="hash-link" aria-label="Direct link to 网络超时" title="Direct link to 网络超时" translate="no">​</a></h3>
<p>要设置工具调用后等待 MCP 服务器响应的最大时间：</p>
<ol>
<li class="">点击单个 MCP 服务器配置框底部的 <code>Network Timeout</code> 下拉菜单并更改时间。默认为 1 分钟，但可以在 30 秒到 5 分钟之间设置。</li>
</ol>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-6.png" alt="网络超时下拉菜单" width="400">
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="自动批准工具">自动批准工具<a href="#自动批准工具" class="hash-link" aria-label="Direct link to 自动批准工具" title="Direct link to 自动批准工具" translate="no">​</a></h3>
<p>MCP 工具自动批准按工具单独工作，默认禁用。要配置自动批准：</p>
<ol>
<li class="">首先在 <a class="" href="/features/auto-approving-actions">自动批准操作</a> 中启用全局 &quot;Use MCP servers&quot; 自动批准选项</li>
<li class="">在 MCP 服务器设置中，找到要自动批准的特定工具</li>
<li class="">选中工具名称旁边的 <code>Always allow</code> 复选框</li>
</ol>
<img src="/img/using-mcp-in-roo/using-mcp-in-roo-7.png" alt="MCP 工具的 Always allow 复选框" width="120">
<p>启用后，Roo Code 将自动批准此特定工具，无需提示。注意，全局 &quot;Use MCP servers&quot; 设置优先 - 如果它被禁用，任何 MCP 工具都不会被自动批准。</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="查找和安装-mcp-服务器">查找和安装 MCP 服务器<a href="#查找和安装-mcp-服务器" class="hash-link" aria-label="Direct link to 查找和安装 MCP 服务器" title="Direct link to 查找和安装 MCP 服务器" translate="no">​</a></h2>
<p>Roo Code 不附带任何预安装的 MCP 服务器。您需要单独查找和安装它们。</p>
<ul>
<li class=""><strong>社区仓库</strong>：在 GitHub 上查找社区维护的 MCP 服务器列表</li>
<li class=""><strong>询问 Roo</strong>：您可以要求 Roo Code 帮助您查找甚至创建 MCP 服务器（当 &quot;<a href="#enabling-or-disabling-mcp-server-creation" class="">启用 MCP 服务器创建</a>&quot; 已启用时）</li>
<li class=""><strong>自行构建</strong>：使用 SDK 创建自定义 MCP 服务器，通过您自己的工具扩展 Roo Code</li>
</ul>
<p>有关完整 SDK 文档，请访问 <a href="https://github.com/modelcontextprotocol/" target="_blank" rel="noopener noreferrer" class="">MCP GitHub 仓库</a>。</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="在工作流中使用-mcp-工具">在工作流中使用 MCP 工具<a href="#在工作流中使用-mcp-工具" class="hash-link" aria-label="Direct link to 在工作流中使用 MCP 工具" title="Direct link to 在工作流中使用 MCP 工具" translate="no">​</a></h2>
<p>配置 MCP 服务器后，Roo 会自动检测其可用的工具和资源。有效利用这些工具需要了解核心交互步骤，以及 Roo 如何解释您提供的工具。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="核心工作流步骤">核心工作流步骤<a href="#核心工作流步骤" class="hash-link" aria-label="Direct link to 核心工作流步骤" title="Direct link to 核心工作流步骤" translate="no">​</a></h3>
<p>您与 MCP 工具的交互通常遵循以下序列：</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-启动任务">1. 启动任务<a href="#1-启动任务" class="hash-link" aria-label="Direct link to 1. 启动任务" title="Direct link to 1. 启动任务" translate="no">​</a></h4>
<p>在 Roo Code 聊天界面中键入您的请求开始。</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-roo-识别工具">2. Roo 识别工具<a href="#2-roo-识别工具" class="hash-link" aria-label="Direct link to 2. Roo 识别工具" title="Direct link to 2. Roo 识别工具" translate="no">​</a></h4>
<p>R</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/RooCodeInc/Roo-Code-Docs/edit/main/docs/features/mcp/using-mcp-in-roo.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-12-16T18:03:17.000Z" itemprop="dateModified">Dec 16, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/features/mcp/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MCP 概述</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/features/mcp/what-is-mcp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">什么是 MCP？</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#配置-mcp-服务器" class="table-of-contents__link toc-highlight">配置 MCP 服务器</a><ul><li><a href="#编辑-mcp-设置文件" class="table-of-contents__link toc-highlight">编辑 MCP 设置文件</a></li><li><a href="#理解传输类型" class="table-of-contents__link toc-highlight">理解传输类型</a></li></ul></li><li><a href="#启用或禁用-mcp-服务器" class="table-of-contents__link toc-highlight">启用或禁用 MCP 服务器</a></li><li><a href="#启用或禁用-mcp-服务器创建" class="table-of-contents__link toc-highlight">启用或禁用 MCP 服务器创建</a></li><li><a href="#如何使用-roo-创建-mcp-服务器" class="table-of-contents__link toc-highlight">如何使用 Roo 创建 MCP 服务器</a></li><li><a href="#管理单个-mcp-服务器" class="table-of-contents__link toc-highlight">管理单个 MCP 服务器</a><ul><li><a href="#删除服务器" class="table-of-contents__link toc-highlight">删除服务器</a></li><li><a href="#重启服务器" class="table-of-contents__link toc-highlight">重启服务器</a></li><li><a href="#启用或禁用服务器" class="table-of-contents__link toc-highlight">启用或禁用服务器</a></li><li><a href="#网络超时" class="table-of-contents__link toc-highlight">网络超时</a></li><li><a href="#自动批准工具" class="table-of-contents__link toc-highlight">自动批准工具</a></li></ul></li><li><a href="#查找和安装-mcp-服务器" class="table-of-contents__link toc-highlight">查找和安装 MCP 服务器</a></li><li><a href="#在工作流中使用-mcp-工具" class="table-of-contents__link toc-highlight">在工作流中使用 MCP 工具</a><ul><li><a href="#核心工作流步骤" class="table-of-contents__link toc-highlight">核心工作流步骤</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__main"><div class="footer__brand"><div class="footer__logo-container"><img src="/img/roo-code-logo-dark.svg" alt="Roo Code Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="120" height="24"><img src="/img/roo-code-logo-white.svg" alt="Roo Code Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="120" height="24"></div><div class="footer__tagline">Your AI Software Engineering Team. Interactive in the IDE, autonomous in the cloud.</div><div class="footer__social-icons"><div style="display:flex;gap:1rem;flex-wrap:wrap;justify-content:center"><a href="https://github.com/RooCodeInc/Roo-Code" aria-label="GitHub" class="footer__link-item" style="text-decoration:none;transition:opacity 0.2s ease"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://discord.gg/roocode" aria-label="Discord" class="footer__link-item" style="text-decoration:none;transition:opacity 0.2s ease"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></a><a href="https://www.reddit.com/r/RooCode/" aria-label="Reddit" class="footer__link-item" style="text-decoration:none;transition:opacity 0.2s ease"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 256C0 114.6 114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256L37.1 512c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256zM349.6 153.6c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34c-34.5 3.7-61.4 33-61.4 68.4l0 .2c-37.5 1.6-71.8 12.3-99 29.1c-10.1-7.8-22.8-12.5-36.5-12.5c-33 0-59.8 26.8-59.8 59.8c0 24 14.1 44.6 34.4 54.1c2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54c0-33-26.8-59.8-59.8-59.8c-13.7 0-26.3 4.6-36.4 12.4c-27.4-17-62.1-27.7-100-29.1l0-.2c0-25.4 18.9-46.5 43.4-49.9l0 0c4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6s-31.4-8.8-30.4-30.5s15.4-38.3 32.1-38.3zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9 .8-6.2 3.9-6.5c18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1 .3 5.1 3.6 3.9 6.5z"></path></svg></a><a href="https://x.com/roocode" aria-label="X (Twitter)" class="footer__link-item" style="text-decoration:none;transition:opacity 0.2s ease"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path></svg></a><a href="https://www.linkedin.com/company/roo-code" aria-label="LinkedIn" class="footer__link-item" style="text-decoration:none;transition:opacity 0.2s ease"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a href="https://www.tiktok.com/@roo.code" aria-label="TikTok" class="footer__link-item" style="text-decoration:none;transition:opacity 0.2s ease"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"></path></svg></a><a href="https://bsky.app/profile/roocode.bsky.social" aria-label="Bluesky" class="footer__link-item" style="text-decoration:none;transition:opacity 0.2s ease"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"></path></svg></a></div></div></div><div class="footer__links-wrapper"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/RooCodeInc/Roo-Code/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues</a></li><li class="footer__item"><a href="https://github.com/RooCodeInc/Roo-Code/discussions/categories/feature-requests?discussions_q=is%3Aopen+category%3A%22Feature+Requests%22+sort%3Atop" target="_blank" rel="noopener noreferrer" class="footer__link-item">Feature Requests</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Download</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline" target="_blank" rel="noopener noreferrer" class="footer__link-item">VS Code Marketplace</a></li><li class="footer__item"><a href="https://open-vsx.org/extension/RooVeterinaryInc/roo-cline" target="_blank" rel="noopener noreferrer" class="footer__link-item">Open VSX Registry</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:support@roocode.com" target="_self" rel="noopener noreferrer" class="footer__link-item">Contact</a></li><li class="footer__item"><a href="https://careers.roocode.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://roocode.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website Privacy Policy</a></li><li class="footer__item"><a href="https://github.com/RooCodeInc/Roo-Code/blob/main/PRIVACY.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Extension Privacy Policy</a></li></ul></div></div></div></div></div></footer><div role="banner" aria-label="Cookie consent banner" aria-live="polite"></div></div>
</body>
</html>